{#-*- engine:django -*-#}
{% extends "mathrix/front.html" %}

<!-- Includes MathJax just for the Results Page -->

{% block latex %}

	<script type="text/javascript"
		src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>

{% endblock %}


{% block inputblock %}
	$$ \Large \textit{Result} $$
	
	<!-- To check if the result produce errors -->

	{% if not error %}
		
		<div class="final">
			\begin{array}{c{% if steps %}cc{% endif %}}
			
			{% if q == 'evaluate' %} {{ exp }} {% else %} A {% endif %} {% if soln %} & {% if 1 == soln[0][0]|length %} \vec{b} {% else %} B {% endif %} {% endif %} {% if steps %} & \text{Row Operations} {% endif %} \\
			
			{% for p in range(values|length) %}
				\begin{bmatrix}
				{% for i in values[p] %}
					{% set row = loop %}
					{% for j in i %}
						{% if j != '' and j is number and j.is_integer() %}{{ j|int }}{% else %}{{ j }}{% endif %} {% if not loop.last %}&{% endif %}
					{% endfor %}
					{% if not loop.last %}\\{% endif %}
				{% endfor %}
				\end{bmatrix}
				
				{% if soln %}		{# <!-- To display the detailed row reductions --> #}
					&
					\begin{bmatrix}
					{% for i in soln[p] %}
						{% set row = loop %}
						{% for j in i %}
							{% if j != '' and j is number and j.is_integer() %}{{ j|int }}{% else %}{{ j }}{% endif %} {% if not loop.last %}&{% endif %}
						{% endfor %}
						{% if not loop.last %}\\{% endif %}
					{% endfor %}
					\end{bmatrix}
				{% endif %}
				
				{% if steps %}
					&
					{{ steps[p] | safe }}
				{% endif %}
				
				{% if not loop.last %} \\ {% endif %}
			{% endfor %}
			\end{array}

			{# <!--To show the spanning solution set  --> #}
			
			{% if span %}
				
				\begin{matrix}
				\textit{Solution Set of} \quad [ \, A \, | \, {% if soln[-1][0]|length == 1 %} \vec{b} {% else %} B {% endif %} \, ] \quad \textit{ is } \quad
				
				{% for j in range(soln[-1][0]|length) %}
					\begin{bmatrix}
					{% for i in range(span|length) %}
						{{ span[i][j] | safe }} {% if not loop.last %} \\ {% endif %}
					{% endfor %}
					\end{bmatrix}
				{% endfor %}
				
				{% if span[0]|length > 1 %} +  \text{Span } \left\{ {% endif %}
				{% for j in range(soln[-1][0]|length, span[0]|length) %}
					\begin{bmatrix}
					{% for i in range(span|length) %}
						{{ span[i][j] | safe }} {% if not loop.last %} \\ {% endif %}
					{% endfor %}
					\end{bmatrix}
					{% if not loop.last %} \, , {% endif %}
				{% endfor %}
				{% if span[0]|length > 1 %} \right\} {% endif %}
				\end{matrix}
				
			{% endif %}
		</div>

	{% else %}

		<div class="error">
			$$ \textit{ {{ values }} } $$
		</div>

	{% endif %}

{% endblock %}


<!--{# Old shitty method to display Result
    <table class="result">
    {% for i in A %}
    {% set row = loop %}
    <tr>
    {% for j in i %}
    <td>
    {% if j != '' and j is number and j.is_integer() %}{{ j|int }}{% else %}{{ j }}{% endif %}
    </td>
    {% endfor %}
    </tr>
    {% endfor %}
    </table>
    {% if soln %}
    <table class="solution">
    {% for i in soln[loop.index0] %}
    {% set row = loop %}
    <tr>
    {% for j in i %}
    <td>
    {% if j != '' and j is number and j.is_integer() %}{{ j|int }}{% else %}{{ j }}{% endif %}
    </td>
    {% endfor %}
    </tr>
    {% endfor %}
    </table>
    {% endif %}
    <span class="steps">
    {% if steps %}
    {{ steps[loop.index0] | safe }}
    {% endif %}
    </span>#}
-->
